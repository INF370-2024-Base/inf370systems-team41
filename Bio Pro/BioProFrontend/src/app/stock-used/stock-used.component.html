<mat-card class="stock-form-card">
  <form [formGroup]="form">
    <div formArrayName="stockItems">
      <div *ngFor="let stockCtrl of stockItems.controls; let i = index" [formGroupName]="i">
        <mat-card-content>
          <div class="form-group">
            <mat-form-field appearance="outline" class="mat-form-field-outline" style="width: 100%;">
              <mat-label><mat-icon>work</mat-icon> Stock</mat-label>
              <mat-select formControlName="StockId">
                <mat-option *ngFor="let stockitem of allStock" [value]="stockitem.stockId">
                  {{ stockitem.stockName }} ({{ stockitem.measurement }})
                </mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" class="mat-form-field-outline" style="width: 100%;">
              <mat-label>Quantity</mat-label>
              <input matInput formControlName="Quantity">
            </mat-form-field>
          </div>
        </mat-card-content>
      </div>
    </div>
    <mat-card-actions>
      <button mat-raised-button class="submit-button" (click)="SubmitForm()">Submit</button>
      <button mat-raised-button class="add-button" (click)="addStockItem()">Add stock item</button>
    </mat-card-actions>
  </form>
</mat-card>

