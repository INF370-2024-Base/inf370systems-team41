<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Hours</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Include Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
   
    <div *ngIf="isLoading" class="text-center">
        <div class="spinner-border" role="status">
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      
      <div *ngIf="!isLoading">
        <div class="container">
          <mat-tab-group (selectedIndexChange)="onTabChange($event)">
            <mat-tab *ngFor="let day of weekDays" [label]="day.label">
              <!-- This is the label area -->
              {{ day.date | date: 'shortDate' }}
            </mat-tab>
          </mat-tab-group>
      
          <mat-card>
            <mat-card-header>
              <mat-card-title>{{ selectedDate ? (selectedDate | date: 'fullDate') : 'Select a Date' }}</mat-card-title>
              <mat-card-subtitle>{{ filteredDailyHours.length }} hours logged</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <table mat-table [dataSource]="filteredDailyHours" class="mat-elevation-z8">
                <!-- Date Column -->
                <ng-container matColumnDef="date">
                  <th mat-header-cell *matHeaderCellDef> Date </th>
                  <td mat-cell *matCellDef="let dailyHour">{{ dailyHour.workDate | date }}</td>
                </ng-container>
      
                <!-- Hours Column -->
                <ng-container matColumnDef="hours">
                  <th mat-header-cell *matHeaderCellDef> Hours </th>
                  <td mat-cell *matCellDef="let dailyHour">{{ dailyHour.hours }}</td>
                </ng-container>
      
                <!-- Employee Column -->
                <ng-container matColumnDef="employee">
                  <th mat-header-cell *matHeaderCellDef> Employee Name </th>
                  <td mat-cell *matCellDef="let dailyHour">
                    <ng-container *ngFor="let employee of dailyHour.employees">
                      {{ employee?.firstName }} {{ employee?.lastName }}
                    </ng-container>
                  </td>
                </ng-container>
      
                <!-- Action Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef> Action </th>
                  <td mat-cell *matCellDef="let dailyHour">
                    <button (click)="onDeleteDailyHour(dailyHour.employeeDailyHoursId)" class="btn btn-outline-danger rounded-btn mr-2">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </td>
                </ng-container>
      
                <!-- Header Row -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <!-- Data Row -->
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      
                <!-- No Data Row -->
                <tr *ngIf="filteredDailyHours.length === 0">
                  <td colspan="4" class="text-center">No matching data found.</td>
                </tr>
              </table>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
     
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-material/1.1.12/angular-material.min.js"></script>
</body>
    <div class="help-button-container">
        <button mat-button [routerLink]="['/help-employee']">
            <mat-icon>live_help</mat-icon>
            <span>Help</span>
        </button>
    </div>


</html>
